var NestedPages=NestedPages||{};NestedPages.Formatter=function(){var s=this,i=jQuery;s.updateSubMenuToggle=function(){for(var e=i(NestedPages.selectors.childToggle),t=0;t<e.length;t++){var a,s=e[t],n=i(s).parent(".row").parent("li");0<i(n).children("ol").length?i(n).children("ol").find("li.page-row").length<1?i(n).children("ol").hide():(a='<div class="child-toggle-spacer"></div>',a+='<a href="#"',0<i(n).children("ol:visible").length&&(a+=' class="open"'),a+='><span class="np-icon-arrow"></span></a>',i(s).html(a),0<i(n).children("ol").children(".np-hide").length&&0===i(n).children("ol").children(".np-hide.shown").length?i(s).find("a").hide():0<i(n).children("ol").children(".np-hide").length&&0<i(n).children("ol").children(".np-hide.shown").length&&i(s).find("a").show(),0<i(n).children("ol").find(".page-row").not(".np-hide").length&&i(s).find("a").show()):i(s).empty().html('<div class="child-toggle-spacer"></div>')}},s.setBorders=function(){i(NestedPages.selectors.rows).removeClass(NestedPages.cssClasses.noborder),i.each(i(NestedPages.selectors.lists),function(){i(this).find(".page-row:visible:first").addClass(NestedPages.cssClasses.noborder)})},s.setNestedMargins=function(){s.setIndent()},s.setIndent=function(){var n="1"===nestedpages.non_indent?20:30,o="1"===nestedpages.non_indent?".row-inner":".child-toggle";i.each(i(NestedPages.selectors.lists),function(e,t){var a=i(this).parents(NestedPages.selectors.lists).length,s=0;NestedPages.jsData.sortable||(s=10),0<a?(s=a*n+s,i(this).find(o).css("padding-left",s+"px")):(a<1&&i(this).find(o).css("padding-left","0px"),NestedPages.jsData.sortable&&!i(this).hasClass("no-sort")?i(this).find(".row-inner").css("padding-left","0px"):i(this).find(".row-inner").css("padding-left","10px"))})},s.setClassicIndent=function(){i.each(i(NestedPages.selectors.lists),function(e,t){var a=i(this).parents(NestedPages.selectors.lists).length,s=0;NestedPages.jsData.sortable||(s=10),0<a?(s=20*a+s,i(this).find(".row-inner").css("padding-left",s+"px")):NestedPages.jsData.sortable&&!i(this).hasClass("no-sort")?i(this).find(".row-inner").css("padding-left","0px"):i(this).find(".row-inner").css("padding-left","10px")})},s.updatePlaceholderWidth=function(e){var t,a;NestedPages.jsData.nestable&&(t=40*i(e.placeholder).parents("ol").length-40,a=i(NestedPages.selectors.sortable).width()-t,i(e.placeholder).width(a).css("margin-left",t+"px")),s.updateListVisibility(e)},s.updateListVisibility=function(e){e=i(e.placeholder).parent("ol");i(e).is(":visible")||(i(e).addClass("nplist"),i(e).show())},s.removeQuickEdit=function(){i(NestedPages.selectors.quickEditOverlay).removeClass("active").remove(),i(".sortable .quick-edit").remove(),i(".row").show()},s.showQuickEdit=function(){i("body").append('<div class="np-inline-overlay"></div>'),setTimeout(function(){i(".np-inline-overlay").addClass("active")},50)},s.flashRow=function(e){i(e).addClass("np-updated"),s.setBorders(),setTimeout(function(){i(e).addClass("np-updated-show")},1500)},s.showAjaxError=function(e){i(NestedPages.selectors.ajaxError).find("p").text(e),i(NestedPages.selectors.ajaxError).show()},s.hideAjaxError=function(e){i(NestedPages.selectors.ajaxError).hide()},s.sizeLinkThumbnails=function(){var e=i(NestedPages.selectors.thumbnailContainer).not(NestedPages.selectors.thumbnailContainerLink).first().find("img"),t=i(e).width(),a=i(e).height();i.each(i(NestedPages.selectors.thumbnailContainerLink),function(){i(this).width(t),i(this).height(a)})}},(NestedPages=NestedPages||{}).Dropdowns=function(){var t=this,a=jQuery;return t.dropdown="",t.activeBtn="",t.activeContent="",t.toggleBtn="[data-dropdown-toggle]",t.dropdownContainer="[data-dropdown]",t.dropdownContent="[data-dropdown-content]",t.selectors={caret_up:"icon-arrow_drop_up",caret_down:"icon-arrow_drop_down"},t.bindEvents=function(){a(document).on("click",t.toggleBtn,function(e){e.preventDefault(),t.activeBtn=a(this),t.dropdown=a(this).parents(t.dropdownContainer),t.toggleDropdown()}),a(document).on("click",function(e){t.closeDropdowns(e.target)}),a(document).on("dropdown-opened",function(e,t){0<a(t).parents(NestedPages.selectors.row).length&&a(t).parents(NestedPages.selectors.row).addClass("active")}),a(document).on("dropdown-closed",function(){a(NestedPages.selectors.row).removeClass("active")})},t.toggleDropdown=function(){a("."+t.selectors.caret_up).attr("class",t.selectors.caret_down);var e=a(t.dropdown).find(t.dropdownContent);if(t.activeContent=e,a(e).hasClass("active"))return a(e).removeClass("active"),a(t.activeBtn).removeClass("active"),a(t.activeBtn).find("."+t.selectors.caret_up).attr("class",t.selectors.caret_down),void a(document).trigger("dropdown-closed",e);t.setPositioning(),a(t.toggleBtn).removeClass("active"),a(t.dropdownContent).removeClass("active"),a(e).addClass("active"),a(t.activeBtn).find("."+t.selectors.caret_down).attr("class",t.selectors.caret_up),a(t.activeBtn).addClass("active"),a(document).trigger("dropdown-opened",e)},t.setPositioning=function(){var e=a(t.activeBtn).outerHeight();a(t.activeContent).css("top",e+"px")},t.closeDropdowns=function(e){0===a(e).parents(t.dropdownContainer).length&&(a(t.dropdownContent).removeClass("active"),a(t.toggleBtn).removeClass("active"),a(t.activeBtn).find("."+t.selectors.caret_up).attr("class",t.selectors.caret_down),a(document).trigger("dropdown-closed",void 0))},t.bindEvents()},(NestedPages=NestedPages||{}).Modals=function(){var a=this,s=jQuery;return a.activeBtn="",a.activeModal="",a.modalOpen=!1,a.selectors={toggleBtn:"[data-nestedpages-modal-toggle]",backdrop:"[data-nestedpages-modal-backdrop]",closeBtn:"[data-nestedpages-modal-close]",title:"data-nestedpages-modal-title",content:"data-nestedpages-modal-content"},a.bindEvents=function(){s(document).on("click",a.selectors.toggleBtn,function(e){e.preventDefault(),a.activeBtn=s(this),a.openModal()}),s(document).on("click",a.selectors.closeBtn,function(e){e.preventDefault(),a.closeModals()}),s(document).on("open-modal-manual",function(e,t){a.activeModal=s('[data-nestedpages-modal="'+t+'"]'),a.openModal()}),s(document).on("close-modal-manual",function(e){a.closeModals()}),s(document).on("click",a.selectors.backdrop,function(e){a.closeModals()}),s(document).ready(function(){a.checkHash()})},a.openModal=function(){var e;a.modalOpen?a.closeModals():(0<s(a.activeBtn).length&&(e=s(a.activeBtn).attr("data-nestedpages-modal-toggle"),a.activeModal=s('*[data-nestedpages-modal="'+e+'"]')),s(a.activeModal).addClass("active"),a.modalOpen=!0,a.populateModal(),s(document).trigger("open-modal",[a.activeBtn,a.activeModal]))},a.closeModals=function(){a.modalOpen=!1,s("[data-nestedpages-modal]").removeClass("active"),a.activeModal="",a.activeBtn=""},a.populateModal=function(){var e=s(a.activeBtn).attr(a.selectors.title);void 0!==e&&""!==e&&s(a.activeModal).find("[data-nestedpages-modal-title]").text(e);e=s(a.activeBtn).attr(a.selectors.content);void 0!==e&&""!==e&&s(a.activeModal).find("[data-nestedpages-modal-content]").html(e)},a.checkHash=function(){var e;window.location.hash&&"#modal"===window.location.hash.substring(0,6)&&(e=window.location.hash.substring(7),a.activeModal=s('*[data-nestedpages-modal="'+e+'"]'),a.openModal())},a.bindEvents()},(NestedPages=NestedPages||{}).CheckAll=function(){var a=this,s=jQuery;return a.activeCheckbox="",a.selectors={checkbox:"[data-np-check-all]"},a.bindEvents=function(){s(document).on("change",a.selectors.checkbox,function(){a.activeCheckbox=s(this),a.toggleCheckboxes()}),s(document).on("change","input[type=checkbox]",function(){a.checkAllStatus(s(this))})},a.init=function(){a.bindEvents()},a.toggleCheckboxes=function(){var t=!!s(a.activeCheckbox).is(":checked"),e=s(a.activeCheckbox).attr("data-np-check-all"),e=s('*[name="'+e+'"]');s.each(e,function(){var e=s(this).parents(NestedPages.selectors.rows);s(this).prop("checked",t),s(e).hasClass("np-hide")&&!s(e).is(":visible")&&s(e).find(NestedPages.selectors.bulkActionsCheckbox).prop("checked",!1)}),a.toggleCheckAll()},a.toggleCheckAll=function(){var e=s(a.activeCheckbox).attr("data-np-check-all"),t=(t=s('*[name="'+e+'"]').length)-s(".np-hide").find(NestedPages.selectors.bulkActionsCheckbox).length+s(".np-hide:visible").find(NestedPages.selectors.bulkActionsCheckbox).length,e=s('*[name="'+e+'"]:checked').length;if(t==e)return s(a.activeCheckbox).prop("checked",!0),void s(a.activeCheckbox).removeClass("check-all-partial");0<e?s(a.activeCheckbox).addClass("check-all-partial"):(s(a.activeCheckbox).attr("checked",!1),s(a.activeCheckbox).removeClass("check-all-partial"))},a.checkAllStatus=function(e){e=s(e).attr("name"),e=s('*[data-np-check-all="'+e+'"]');0!==e.length&&(a.activeCheckbox=s(e)[0],a.toggleCheckAll())},a.init()},(NestedPages=NestedPages||{}).BulkActions=function(){var n=this,o=jQuery;return n.selectedNumber=0,n.selectedLinks=[],n.selectedPosts=[],n.bindEvents=function(){o(document).on("change",NestedPages.selectors.bulkActionsCheckbox,function(){n.toggleBulkForm()}),o(document).on("submit",NestedPages.selectors.bulkActionsForm,function(e){"edit"===o("select[name=np_bulk_action]").val()&&(e.preventDefault(),n.toggleBulkEdit(!0))}),o(document).on("click",NestedPages.selectors.bulkEditRemoveItem,function(e){e.preventDefault();e=o(this).siblings("input[type=hidden]").val();n.uncheckBulkItem(e)}),o(document).on("click",NestedPages.selectors.bulkEditCancel,function(e){e.preventDefault(),n.uncheckAllBulkItems()})},n.toggleBulkForm=function(){var t=!1,a="",s="";if(n.selectedPosts=[],n.selectedLinks=[],o.each(o(NestedPages.selectors.bulkActionsCheckbox),function(){var e;o(this).is(":checked")&&(e=o(this).parents(NestedPages.selectors.rows),t=!0,o(this).parent("div").hasClass("np-check-all")||o(e).hasClass("post-type-np-redirect")||(a+=o(this).val()+","),o(e).hasClass("post-type-np-redirect")&&(s+=o(this).val()+",",n.selectedLinks.push(o(this).val())),"np-redirect"===o(this).attr("data-np-post-type")||o(this).parent("div").hasClass("np-check-all")||((e=[]).title=o(this).attr("data-np-bulk-checkbox"),e.id=o(this).val(),n.selectedPosts.push(e)))}),n.setBulkEditPosts(),n.toggleEditOption(),n.toggleLinkCountAlert(),t)return o(NestedPages.selectors.bulkActionsForm).show(),o(NestedPages.selectors.bulkActionsIds).val(a),o(NestedPages.selectors.bulkActionRedirectIds).val(s),void n.setSelectedNumber();o(NestedPages.selectors.bulkActionsIds).val(""),o(NestedPages.selectors.bulkActionsForm).hide()},n.setBulkEditPosts=function(){for(var e="",t=0;t<n.selectedPosts.length;t++)e+='<li><a href="#" class="np-remove" data-np-remove-bulk-item>&times;</a>',e+=n.selectedPosts[t].title,e+='<input type="hidden" name="post_ids[]" value="'+n.selectedPosts[t].id+'"></li>';o(NestedPages.selectors.bulkEditTitles).html(e)},n.uncheckBulkItem=function(e){o.each(o(NestedPages.selectors.bulkActionsCheckbox),function(){o(this).val()==e&&o(this).prop("checked",!1).change()}),0===o(NestedPages.selectors.bulkEditRemoveItem).length&&n.toggleBulkEdit(!1)},n.uncheckAllBulkItems=function(){o.each(o(NestedPages.selectors.bulkActionsCheckbox),function(){o(this).prop("checked",!1).change()}),n.toggleBulkEdit(!1)},n.setSelectedNumber=function(){var e=o(NestedPages.selectors.bulkActionsCheckbox+":checked").not(".np-check-all input").length,t=o(NestedPages.selectors.bulkActionsForm).find("select option").first();o(t).text(nestedpages.bulk_actions+" ("+e+")")},n.toggleEditOption=function(){var e=o(NestedPages.selectors.bulkActionsCheckbox+":checked").not(".np-check-all input").not(".np-redirect-bulk").length,t=o(NestedPages.selectors.bulkActionsForm).find("select option[value=edit]");if(0===e)return o(t).prop("disabled",!0),o(NestedPages.selectors.bulkActionsForm).find("select option").first().prop("selected",!0),void n.toggleBulkEdit(!1);o(t).prop("disabled",!1)},n.toggleBulkEdit=function(e){if(n.toggleLinkCountAlert(),e)return n.disableParentOptions(),o(NestedPages.selectors.bulkEditForm).show(),o(NestedPages.selectors.bulkActionsForm).hide(),void n.setWPSuggest();o(NestedPages.selectors.bulkEditForm).hide(),o(NestedPages.selectors.bulkActionsForm).show(),o(NestedPages.selectors.bulkEditLinkCount).parent("div").hide(),o(NestedPages.selectors.bulkActionsForm).find("select option").first().text(nestedpages.bulk_actions),n.resetBulkEditFields()},n.toggleLinkCountAlert=function(){0!==n.selectedLinks.length?o(NestedPages.selectors.bulkEditLinkCount).parent("div").show():o(NestedPages.selectors.bulkEditLinkCount).parent("div").hide()},n.disableParentOptions=function(){for(var e=o(NestedPages.selectors.bulkEditForm).find("select[name=post_parent]"),t=0;t<n.selectedPosts.length;t++)o(e).find("option[value="+n.selectedPosts[t].id+"]").attr("disabled",!0)},n.setWPSuggest=function(){var e=o(NestedPages.selectors.bulkEditForm).find("[data-autotag]");o.each(e,function(e,t){var a=o(this).attr("data-taxonomy");o(this).suggest(ajaxurl+"?action=ajax-tag-search&tax="+a,{multiple:!0,multipleSep:","})})},n.resetBulkEditFields=function(){var e=o(NestedPages.selectors.bulkEditForm).find("select");o.each(e,function(){o(this).find("option").first().prop("selected",!0),o(this).find("option").removeAttr("disabled")});e=o(NestedPages.selectors.bulkEditForm).find(".cat-checklist");o.each(e,function(){o(this).find("input[type=checkbox]").prop("checked",!1)})},n.bindEvents()},(NestedPages=NestedPages||{}).HiddenItemCount=function(){var e=this,a=jQuery;return e.init=function(){e.bindEvents()},e.bindEvents=function(){a(document).on("change",NestedPages.selectors.bulkActionsCheckbox,function(){e.toggleHiddenCount()}),a(document).on("click",NestedPages.selectors.toggleAll,function(){e.toggleHiddenCount()}),a(document).on("click",NestedPages.selectors.pageToggle,function(){e.toggleHiddenCount()})},e.toggleHiddenCount=function(){var t=0;a.each(a(NestedPages.selectors.bulkActionsCheckbox),function(){var e;a(this).is(":checked")&&(a(this).parent("div").hasClass("np-check-all")||(e=a(this).closest(".page-row"),a(e).is(":visible")||t++))}),t<1?a(NestedPages.selectors.hiddenItemCountParent).hide():(a(NestedPages.selectors.hiddenItemCount).text(t),a(NestedPages.selectors.hiddenItemCountParent).show())},e.init()},(NestedPages=NestedPages||{}).MenuToggle=function(){var a=this,n=jQuery;return a.formatter=new NestedPages.Formatter,a.bindEvents=function(){n(document).on("click",NestedPages.selectors.childToggleLink,function(e){e.preventDefault(),a.toggleSingleMenu(n(this))}),n(document).on("click",NestedPages.selectors.toggleAll,function(e){e.preventDefault(),a.toggleAllMenus()})},a.toggleSingleMenu=function(e){var t=n(e).parent(NestedPages.selectors.childToggle).parent(NestedPages.selectors.row).siblings("ol");n(e).toggleClass("open"),n(t).toggle(),a.formatter.setBorders(),a.formatter.setNestedMargins(),a.syncUserToggles()},a.toggleAllMenus=function(){var e=NestedPages.selectors.toggleAll;if("closed"===n(e).attr("data-toggle"))return n(NestedPages.selectors.lists).show(),n(e).attr("data-toggle","opened").text(NestedPages.jsData.collapseText),n(NestedPages.selectors.childToggle+" a").addClass("open"),a.formatter.setBorders(),void a.syncUserToggles();n(NestedPages.selectors.lists).not(n(NestedPages.selectors.lists)[0]).hide(),n(e).attr("data-toggle","closed").text(NestedPages.jsData.expandText),n(NestedPages.selectors.childToggle+" a").removeClass("open"),a.formatter.setBorders(),a.syncUserToggles()},a.visibleRowIDs=function(){var s=[],e=n(NestedPages.selectors.rows+":visible");return n.each(e,function(e,t){var a=n(this).attr("id");s.push(a.replace("menuItem_",""))}),s},a.syncUserToggles=function(){n.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.syncToggles,nonce:NestedPages.jsData.nonce,ids:a.visibleRowIDs(),posttype:NestedPages.jsData.posttype},success:function(e){"success"!==e.status&&console.log("There was an error saving toggled pages.")}})},a.bindEvents()},(NestedPages=NestedPages||{}).PageToggle=function(){var a=this,s=jQuery;return a.activeButton="",a.formatter=new NestedPages.Formatter,a.bindEvents=function(){s(document).on("click",NestedPages.selectors.toggleHidden,function(e){e.preventDefault(),a.activeButton=s(this),a.toggleHidden()}),s(document).on("click",NestedPages.selectors.toggleStatus,function(e){e.preventDefault(),a.toggleStatus(s(this))})},a.toggleHidden=function(){var e=s(a.activeButton),t=s(e).attr("href");if("#show"==t)return s(e).attr("href","#hide").text(NestedPages.jsData.showHiddenText),s(NestedPages.selectors.hiddenRows).removeClass("shown").hide(),a.formatter.updateSubMenuToggle(),void a.formatter.setBorders();"#hide"==t&&(s(e).attr("href","#show").text(NestedPages.jsData.hideHiddenText),s(NestedPages.selectors.hiddenRows).addClass("shown").show(),a.formatter.updateSubMenuToggle(),a.formatter.setBorders())},a.toggleStatus=function(e){var t=(t=s(e).attr("href")).substring(1);s(NestedPages.selectors.syncCheckbox).attr("disabled",!1),s(NestedPages.selectors.toggleStatus).removeClass("active"),s(e).addClass("active"),a.saveStatusPreference(t),"draft"==t&&(s(NestedPages.selectors.syncCheckbox).attr("disabled",!0),s("."+t).addClass("nested-visible")),"all"!=t?(s(NestedPages.selectors.rows).hide(),s("."+t).show()):s(NestedPages.selectors.rows).show()},a.saveStatusPreference=function(e){s.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.toggleStatusDisplay,nonce:NestedPages.jsData.nonce,status:e,post_type:NestedPages.jsData.posttype}})},a.bindEvents()},(NestedPages=NestedPages||{}).Nesting=function(){var n=this,o=jQuery;n.formatter=new NestedPages.Formatter,n.initializeSortable=function(){if(!NestedPages.jsData.nestable)return n.initializeSortableFlat();o(NestedPages.selectors.sortable).not(NestedPages.selectors.notSortable).nestedSortable({items:NestedPages.selectors.rows,toleranceElement:"> .row",handle:NestedPages.selectors.handle,placeholder:"ui-sortable-placeholder",tabSize:56,isAllowed:function(e,t,a){return!(o(t).hasClass("post-type-np-redirect")&&!o(a).hasClass("post-type-np-redirect"))},start:function(e,t){t.placeholder.height(t.item.height())},sort:function(e,t){n.formatter.updatePlaceholderWidth(t)},stop:function(e,t){setTimeout(function(){n.formatter.updateSubMenuToggle(),n.formatter.setBorders(),n.formatter.setNestedMargins()},100),n.syncNesting()}})},n.initializeSortableFlat=function(){var e=o(NestedPages.selectors.lists).not(NestedPages.selectors.notSortable);o.each(e,function(){o(this).sortable({items:">"+NestedPages.selectors.rows,handle:NestedPages.selectors.handle,placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0,start:function(e,t){t.placeholder.height(t.item.height())},sort:function(e,t){n.formatter.updatePlaceholderWidth(t)},stop:function(e,t){setTimeout(function(){n.formatter.updateSubMenuToggle(),n.formatter.setBorders(),n.formatter.setNestedMargins()},100),n.syncNesting()}})})},n.disableNesting=function(){o(NestedPages.selectors.sortable).sortable("destroy")},n.syncNesting=function(e,t){var a,s;"1"===nestedpages.manual_order_sync&&!e||(o(NestedPages.selectors.errorDiv).hide(),o(NestedPages.selectors.loadingIndicator).show(),s=!!o(NestedPages.selectors.lists).first().hasClass("filtered"),a=NestedPages.jsData.nestable&&!s?o(NestedPages.selectors.sortable).nestedSortable("toHierarchy",{startDepthCount:0}):n.setNestingArray(),n.disableNesting(),e=NestedPages.jsData.syncmenu,"1"===nestedpages.manual_menu_sync&&(e="nosync"),o.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.syncNesting,nonce:NestedPages.jsData.nonce,list:a,post_type:NestedPages.jsData.posttype,syncmenu:e,filtered:s},success:function(e,t){n.initializeSortable(),"error"===e.status?(o(NestedPages.selectors.errorDiv).text(e.message).show(),o(NestedPages.selectors.loadingIndicator).hide()):t&&"function"==typeof t?t():o(NestedPages.selectors.loadingIndicator).hide()}}))},n.setNestingArray=function(e){return ret=[],o(NestedPages.selectors.lists).first().children("li.page-row").each(function(){var e=n.recursiveNesting(this);ret.push(e)}),ret},n.recursiveNesting=function(e){var t,a=o(e).attr("id");if(a)return a=a.replace("menuItem_",""),t={id:a},0<o(e).children(NestedPages.selectors.lists).children(NestedPages.selectors.rows).length&&(t.children=[],o(e).children(NestedPages.selectors.lists).children(NestedPages.selectors.rows).each(function(){var e=n.recursiveNesting(this);t.children.push(e)})),t}},(NestedPages=NestedPages||{}).SyncMenuSetting=function(){var t=this,e=jQuery;return t.formatter=new NestedPages.Formatter,t.init=function(){t.bindEvents()},t.bindEvents=function(){e(document).ready(function(){"1"!==nestedpages.manual_menu_sync&&"1"===nestedpages.syncmenu&&t.syncSetting()}),e(document).on("change",NestedPages.selectors.syncCheckbox,function(){t.syncSetting()})},t.syncSetting=function(){"page"===NestedPages.jsData.posttype&&0!==e(NestedPages.selectors.syncCheckbox).length&&(NestedPages.jsData.syncmenu=e(NestedPages.selectors.syncCheckbox).is(":checked")?"sync":"nosync",e.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.syncMenu,nonce:NestedPages.jsData.nonce,post_type:NestedPages.jsData.posttype,syncmenu:NestedPages.jsData.syncmenu},success:function(e){"error"===e.status&&t.formatter.showAjaxError(e.message)},error:function(e){console.log(e)}}))},t.bindEvents()},(NestedPages=NestedPages||{}).NewPost=function(){var r=this,d=jQuery;return r.formatter=new NestedPages.Formatter,r.parent_id=0,r.posts="",r.form="",r.bindEvents=function(){d(document).on("open-modal",function(e,t,a){t=d(t).attr("data-nestedpages-modal-toggle");void 0!==t&&"np-bulk-modal"==t&&r.openModal()}),d(document).on("submit",NestedPages.selectors.newPageForm,function(e){e.preventDefault()}),d(document).on("click",NestedPages.selectors.newPageSubmitButton,function(e){e.preventDefault(),r.submitForm(d(this))}),d(document).on("click",NestedPages.selectors.newPageTitle,function(e){e.preventDefault(),r.addTitleField(d(this))}),d(document).on("click",NestedPages.selectors.newPageRemoveTitle,function(e){e.preventDefault(),r.removeTitleField(d(this))}),d(document).on("click",NestedPages.selectors.addChildButton,function(e){e.preventDefault(),r.openQuickEdit(d(this))}),d(document).on("click",NestedPages.selectors.cancelNewChildButton,function(e){e.preventDefault(),r.cancelNewPage()}),d(document).on("click","["+NestedPages.selectors.newBeforeButton+"]",function(e){e.preventDefault(),r.openQuickEdit(d(this))}),d(document).on("click","["+NestedPages.selectors.newAfterButton+"]",function(e){e.preventDefault(),r.openQuickEdit(d(this))}),d(document).on("keydown",function(e){27===e.keyCode&&(r.cancelNewPage(),d(document).click())})},r.openModal=function(){var e=d(NestedPages.selectors.newPageFormContainer).clone().find(NestedPages.selectors.newPageForm);d(e).addClass("in-modal"),d(NestedPages.selectors.newPageModal).find(".modal-body").html(e),d(NestedPages.selectors.newPageModal).find("h3").text(nestedpages.add_multiple),d(NestedPages.selectors.newPageModal).find(".page_parent_id").val(r.parent_id),d(e).find(".np_title").first().focus(),d(e).find(NestedPages.selectors.newPageTitle).first().prop("tabindex","2")},r.openQuickEdit=function(e){var t,a=void 0!==(a=d(e).attr(NestedPages.selectors.newBeforeButton))&&""!==a&&a,s=void 0!==(s=d(e).attr(NestedPages.selectors.newAfterButton))&&""!==s&&s,n=d(e).closest(NestedPages.selectors.row).parent("li"),o=d(NestedPages.selectors.newPageFormContainer).clone();0<d(n).children("ol").length?(t=d(n).children("ol"),d(o).insertBefore(t)):d(o).appendTo(n),d(o).siblings(NestedPages.selectors.row).hide(),r.formatter.showQuickEdit(),d(o).find(".parent_name").html("<em>Parent:</em> "+d(e).attr("data-parentname")),a||s||d(o).find(".page_parent_id").val(d(e).attr("data-id")),a&&(d(o).find(".page_before_id").val(a),d(o).find("[data-new-post-relation-title]").text(nestedpages.insert_before+": "+d(e).attr("data-parentname"))),s&&(d(o).find(".page_after_id").val(s),d(o).find("[data-new-post-relation-title]").text(nestedpages.insert_after+": "+d(e).attr("data-parentname"))),d(o).show(),d(o).find(".np_title").focus(),d(o).find(NestedPages.selectors.newPageTitle).prop("tabindex","2")},r.cancelNewPage=function(){r.formatter.removeQuickEdit(),d(NestedPages.selectors.newChildError).hide(),d(NestedPages.selectors.newPageModal).find(".modal-body").empty(),d(NestedPages.selectors.sortable).find(".new-child").remove(),d(NestedPages.selectors.row).show()},r.addTitleField=function(e){var t=d(e).parents("form"),a=d(e).siblings(".new-page-titles").children("li").length+1,s='<li><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="handle np-icon-menu"><path d="M0 0h24v24H0z" fill="none" /><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" class="bars" /></svg><div class="form-control new-child-row"><label>'+NestedPages.jsData.titleText+'</label><div><input type="text" name="post_title[]" class="np_title" placeholder="'+NestedPages.jsData.titleText+'" value="" tabindex="'+a+'" /><a href="#" class="button-secondary np-remove-child">-</a></div></div></li>';d(e).siblings(".new-page-titles").append(s);d(t).find(".np_title").last().focus(),d(t).find(NestedPages.selectors.newPageTitle).prop("tabindex",+a),d(".new-page-titles").sortable({items:"li",handle:".handle"}),r.toggleAddEditButton(t)},r.removeTitleField=function(e){var t=d(e).parents("form");d(e).parents(".new-child-row").parent("li").remove(),r.toggleAddEditButton(t)},r.submitForm=function(e){r.toggleLoading(!0),r.form=d(e).parents("form");var t=!!d(e).hasClass("add-edit"),e=NestedPages.formActions.newPage;""!==d(r.form).find(".page_before_id").val()&&(e=NestedPages.formActions.newBeforeAfter),""!==d(r.form).find(".page_after_id").val()&&(e=NestedPages.formActions.newBeforeAfter),d.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:d(r.form).serialize()+"&action="+e+"&nonce="+NestedPages.jsData.nonce+"&syncmenu="+NestedPages.jsData.syncmenu+"&post_type="+NestedPages.jsData.posttype,success:function(e){if("error"===e.status)return r.toggleLoading(!1),void d(r.form).find(NestedPages.selectors.quickEditErrorDiv).text(e.message).show();!0!=t?(r.toggleLoading(!1),r.posts=e.new_pages,r.addPosts()):(e=(e=e.new_pages[0].edit_link).replace(/&amp;/g,"&"),window.location.replace(e))},error:function(e){console.log(e),r.toggleLoading(!1),d(r.form).find(NestedPages.selectors.quickEditErrorDiv).text("The form could not be saved at this time.").show()}})},r.addPosts=function(){var e,t=""!==(t=d(r.form).find(".page_before_id").val())&&t,a=""!==(a=d(r.form).find(".page_after_id").val())&&a,s=d(r.form).parent(".new-child").parent(".page-row");for(0!==d(s).children("ol").length||t||a||d(s).append('<ol class="nplist"></ol>'),e=d(r.form).hasClass("in-modal")?d(".nplist.sortable li.page-row:first"):d(s).children("ol"),i=0;i<r.posts.length;i++)r.appendRows(e,r.posts[i],t,a);t||a||d(e).show(),r.formatter.updateSubMenuToggle(),r.formatter.setNestedMargins(),r.cancelNewPage(),d(document).trigger("close-modal-manual")},r.appendRows=function(e,t,a,s){var n,o='<li id="menuItem_'+t.id+'" class="page-row';"publish"===t.status&&(o+=" published"),o+='">',NestedPages.jsData.hierarchical?(o+='<div class="row">',o+='<div class="child-toggle"></div>'):(o+='<div class="row non-hierarchical">',o+='<div class="non-hierarchical-spacer"></div>'),o+='<div class="row-inner">',o+='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="np-icon-sub-menu"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z" class="arrow" /></svg>',o+='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="handle np-icon-menu"><path d="M0 0h24v24H0z" fill="none" /><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" class="bars" /></svg>',o+='<a href="'+t.edit_link+'" class="page-link page-title">',o+='<span class="title">'+t.title+"</span>","Publish"!==t.status?o+='<span class="status">('+t.status+")</span>":o+='<span class="status"></span>',o+='<span class="nav-status">',"hide"===t.np_nav_status&&(o+=" "+nestedpages.hidden),o+="</span>",o+='<span class="edit-indicator">Edit</span>',o+="</a>",NestedPages.jsData.hierarchical||(o+='<div class="np-post-columns">',o+='<ul class="np-post-info">',o+='<li><span class="np-author-display">'+t.author_formatted+"</span></li>",o+="<li>"+t.date_formatted+"</li>",o+="</ul>",o+="</div>"),d(".nplist").first().hasClass("has-yoast")&&(o+='<span class="np-seo-indicator na"></span>'),o+='<div class="action-buttons">',o+='<div class="nestedpages-dropdown" data-dropdown><a href="#" class="np-btn has-icon toggle" data-dropdown-toggle><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg></a><ul class="nestedpages-dropdown-content" data-dropdown-content>',o+='<li><a href="#" class="open-redirect-modal" data-parentid="'+t.id+'"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>'+nestedpages.add_link+"</a></li>",o+='<li><a href="#" class="add-new-child" data-id="'+t.id+'" data-parentname="'+t.title+'"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/><path d="M0 0h24v24H0z" fill="none"/></svg>'+nestedpages.add_child_short+"</a></li>",o+="</ul></div>",o+='<a href="#" class="np-btn np-quick-edit" data-id="'+t.id+'" data-template="'+t.page_template+'" data-title="'+t.title+'" data-slug="'+t.slug+'" data-commentstatus="closed" data-status="'+t.status.toLowerCase()+'" data-np-status="show"\tdata-navstatus="show" data-author="'+t.author+'" data-template="'+t.template+'" data-month="'+t.month+'" data-day="'+t.day+'" data-year="'+t.year+'" data-hour="'+t.hour+'" data-minute="'+t.minute+'" data-datepicker="'+t.datepicker+'" data-time="'+t.time+'" data-formattedtime="'+t.formattedtime+'" data-ampm="'+t.ampm+'">'+nestedpages.quick_edit+"</a>",o+='<a href="'+t.view_link+'" class="np-btn" target="_blank">'+nestedpages.view+"</a>",o+='<a href="'+t.delete_link+'" class="np-btn np-btn-trash"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="np-icon-remove"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" class="icon"/><path d="M0 0h24v24H0z" fill="none"/></svg></a>',o+="</div>\x3c!-- .action-buttons --\x3e",o+="</div>\x3c!-- .row-inner --\x3e</div>\x3c!-- .row --\x3e",o+="</li>",a?(n=r.findRowById(a),d(o).insertBefore(n)):s?(n=r.findRowById(s),d(o).insertAfter(n)):d(e).append(o)},r.findRowById=function(e){return d(NestedPages.selectors.rows+"#menuItem_"+e)},r.toggleAddEditButton=function(e){e=d(e).find(".np_title").length;e<1?d(NestedPages.selectors.newPageSubmitButton).hide():(d(NestedPages.selectors.newPageSubmitButton).show(),1<e?d(NestedPages.selectors.newPageSubmitButton+".add-edit").hide():d(NestedPages.selectors.newPageSubmitButton+".add-edit").show())},r.toggleLoading=function(e){if(e)return d(NestedPages.selectors.quickEditErrorDiv).hide(),d(NestedPages.selectors.newPageSubmitButton).attr("disabled","disabled"),void d(NestedPages.selectors.quickEditLoadingIndicator).show();d(NestedPages.selectors.newPageSubmitButton).attr("disabled",!1),d(NestedPages.selectors.quickEditLoadingIndicator).hide()},r.bindEvents()},(NestedPages=NestedPages||{}).QuickEditPost=function(){var r=this,d=jQuery;return r.formatter=new NestedPages.Formatter,r.button="",r.initialData="",r.parent_li="",r.form="",r.flatTerms="",r.termNames="",r.saveButton="",r.newData="",r.row="",r.bindEvents=function(){d(document).on("click",NestedPages.selectors.quickEditOpen,function(e){e.preventDefault(),r.button=d(this),r.openForm()}),d(document).on("click",NestedPages.selectors.quickEditCancel,function(e){e.preventDefault(),r.formatter.removeQuickEdit()}),d(document).on("change",".keep_private",function(){this.checked?d(".post_password").val("").prop("readonly",!0):d(".post_password").prop("readonly",!1)}),d(document).on("click",NestedPages.selectors.quickEditSaveButton,function(e){e.preventDefault(),r.saveButton=d(this),r.save()}),d(document).on("keydown",function(e){27===e.keyCode&&r.formatter.removeQuickEdit()})},r.openForm=function(){r.setInitialData(),r.createForm(),r.populateForm(),r.populateFlatTaxonomies()},r.setInitialData=function(){r.initialData={id:d(r.button).attr("data-id"),title:d(r.button).attr("data-title"),slug:d(r.button).attr("data-slug"),author:d(r.button).attr("data-author"),cs:d(r.button).attr("data-commentstatus"),status:d(r.button).attr("data-status"),template:d(r.button).attr("data-template"),month:d(r.button).attr("data-month"),day:d(r.button).attr("data-day"),year:d(r.button).attr("data-year"),hour:d(r.button).attr("data-hour"),minute:d(r.button).attr("data-minute"),navstatus:d(r.button).attr("data-navstatus"),navCustomUrl:d(r.button).attr("data-custom-url"),npstatus:d(r.button).attr("data-np-status"),navtitle:d(r.button).attr("data-navtitle"),navtitleattr:d(r.button).attr("data-navtitleattr"),navcss:d(r.button).attr("data-navcss"),linktarget:d(r.button).attr("data-linktarget"),password:d(r.button).attr("data-password"),datepicker:d(r.button).attr("data-datepicker"),time:d(r.button).attr("data-formattedtime"),timeTwentyFour:d(r.button).attr("data-time"),ampm:d(r.button).attr("data-ampm"),timeFormat:d(r.button).attr("data-timeformat"),sticky:d(r.button).attr("data-sticky")};var e=d(r.button)[0].attributes;d.each(e,function(e,t){t.name.includes("data-npcustom")&&(r.initialData[t.name]=t.value)}),r.initialData.h_taxonomies=[],r.initialData.f_taxonomies=[],r.parent_li=d(r.button).closest(NestedPages.selectors.row).parent("li");var t=d(r.parent_li).attr("class").split(/\s+/);for(i=0;i<t.length;i++)"in-"===t[i].substring(0,3)&&r.initialData.h_taxonomies.push(t[i]),"inf-"===t[i].substring(0,4)&&r.initialData.f_taxonomies.push(t[i])},r.createForm=function(){var e;r.form=d(NestedPages.selectors.quickEditPostForm).clone(),0<d(r.parent_li).children("ol").length?(e=d(r.parent_li).children("ol"),d(r.form).insertBefore(e)):d(r.form).appendTo(r.parent_li),d(r.form).siblings(NestedPages.selectors.row).hide(),d(r.form).show()},r.populateForm=function(){for(var e in d(r.form).find(".page_id").html("<em>ID:</em> "+r.initialData.id),d(r.form).find(".np_id").val(r.initialData.id),d(r.form).find(".np_title").val(r.initialData.title),d(r.form).find(".np_slug").val(r.initialData.slug),d(r.form).find(".np_author select").val(r.initialData.author),d(r.form).find(".np_status").val(r.initialData.status),d(r.form).find(".np_nav_title").val(r.initialData.navtitle),d(r.form).find(".np_nav_css_classes").val(r.initialData.navcss),d(r.form).find(".np_title_attribute").val(r.initialData.navtitleattr),d(r.form).find(".np_nav_custom_url").val(r.initialData.navCustomUrl),d(r.form).find(".post_password").val(r.initialData.password),d(r.form).find(".np_publish_date").val(r.initialData.datepicker),"open"===r.initialData.cs&&d(r.form).find(".np_cs").attr("checked","checked"),""!==r.initialData.template?d(r.form).find(".np_template").val(r.initialData.template):d(r.form).find(".np_template").val("default"),"private"===r.initialData.status&&(d(r.form).find(".post_password").attr("readonly",!0),d(r.form).find(".keep_private").attr("checked",!0)),"hide"===r.initialData.npstatus?d(r.form).find(".nested_pages_status").attr("checked","checked"):d(r.form).find(".nested_pages_status").removeAttr("checked"),"hide"===r.initialData.navstatus?d(r.form).find(".np_nav_status").attr("checked","checked"):d(r.form).find(".np_nav_status").attr("checked",!1),"_blank"===r.initialData.linktarget?d(r.form).find(".link_target").attr("checked","checked"):d(r.form).find(".link_target").attr("checked",!1),"private"===r.initialData.status&&d(r.form).find(".np_status").val("publish"),"sticky"===r.initialData.sticky?d(r.form).find(".np-sticky").attr("checked","checked"):d(r.form).find(".np-sticky").removeAttr("checked"),"H:i"===r.initialData.timeFormat?d(r.form).find(".np_time").val(r.initialData.timeTwentyFour):(d(r.form).find(".np_time").val(r.initialData.time),d(r.form).find(".np_ampm").val(r.initialData.ampm),d(r.form).find('select[name="mm"]').val(r.initialData.month),d(r.form).find('input[name="jj"]').val(r.initialData.day),d(r.form).find('input[name="aa"]').val(r.initialData.year),d(r.form).find('input[name="hh"]').val(r.initialData.hour),d(r.form).find('input[name="mn"]').val(r.initialData.minute)),r.initialData){var t;e.includes("npcustom")&&r.initialData.hasOwnProperty(e)&&(t=(t=e.replace("data-npcustom-","")).toLowerCase(),d(r.form).find('[data-np-custom-field="'+t+'"]').val(r.initialData[e]))}if(r.populateFlatTaxonomies(),r.initialData.hasOwnProperty("h_taxonomies")){var a=r.initialData.h_taxonomies;for(i=0;i<a.length;i++){var s="#"+a[i];d(r.form).find(s).attr("checked","checked")}}var n=d(r.form).find(".np_datepicker");d.each(n,function(){var e=d(this);e.datepicker({dateFormat:e.attr("data-datepicker-format"),beforeShow:function(e,t){d("#ui-datepicker-div").addClass("nestedpages-datepicker")}})}),r.formatter.showQuickEdit(),d(r.form).show()},r.populateFlatTaxonomies=function(){r.initialData.hasOwnProperty("f_taxonomies")&&(r.createTaxonomyObject(),r.getTermNames(),r.setWPSuggest())},r.createTaxonomyObject=function(){var e={};for(i=0;i<r.initialData.f_taxonomies.length;i++){var t=r.initialData.f_taxonomies[i],a=t.split("-"),s=a.indexOf("nps"),a=(a=a.splice(s+1)).join("-"),s=t.split("-").splice(0,s);s.shift("inf");s=s.join("-");s in e||(e[s]=[]),e[s].push(a)}r.flatTerms=e},r.getTermNames=function(){d.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.getTaxonomies,nonce:NestedPages.jsData.nonce,terms:r.flatTerms},success:function(e){r.termNames=e.terms,r.populateFlatTaxonomyFields()}})},r.populateFlatTaxonomyFields=function(){r.termNames&&d.each(r.termNames,function(e,t){e=d("#"+e+"-quickedit");d(e).val(t.join(","))})},r.setWPSuggest=function(){var e=d(r.form).find("[data-autotag]");d.each(e,function(e,t){var a=d(this).attr("data-taxonomy");d(this).suggest(ajaxurl+"?action=ajax-tag-search&tax="+a,{multiple:!0,multipleSep:","})})},r.save=function(){r.toggleLoading(!0),d.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:d(r.form).find("form").serialize()+"&action="+NestedPages.formActions.quickEditPost+"&nonce="+NestedPages.jsData.nonce+"&syncmenu="+NestedPages.jsData.syncmenu+"&post_type="+NestedPages.jsData.posttype,success:function(e){"error"===e.status?(r.toggleLoading(!1),d(r.form).find(NestedPages.selectors.quickEditErrorDiv).text(e.message).show()):(r.toggleLoading(!1),r.newData=e.post_data,r.updatePostRow())},error:function(e){console.log(e)}})},r.updatePostRow=function(){r.row=d(r.button).parents(".row-inner"),d(r.row).find(".title").text(r.newData.post_title),d(r.row).find(".np-view-button").attr("href",r.newData.permalink);var e,t=d(r.row).find(".status");"publish"!==r.newData._status&&"future"!==r.newData._status?(e=nestedpages.post_statuses[r.newData._status].label,d(t).text("("+e+")")):d(t).text(""),"private"===r.newData.keep_private&&d(t).text(nestedpages.private),""!==r.newData.post_password&&void 0!==r.newData.post_password&&(a=d(t).text(),a+=' <span class="locked">',a+='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>',a+="</span>",d(t).html(a));var a=d(r.row).find(".nav-status");"hide"==r.newData.nav_status?d(a).text("(Hidden)"):d(a).text("");a=d(r.row).parent("li");"hide"==r.newData.np_status?(d(a).addClass("np-hide"),d(r.row).find(".status").after('<svg class="row-status-icon status-np-hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z" fill="none"/><path class="icon" d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/></svg>')):(d(a).removeClass("np-hide"),d(r.row).find(".status-np-hidden").remove());a=d(r.row).find(".sticky");"sticky"==r.newData.sticky?d(a).show():d(a).hide(),NestedPages.jsData.hierarchical||d(r.row).find(".np-author-display").text(r.newData.author_name);var s,n,o=d(r.row).find(NestedPages.selectors.quickEditOpen);for(s in d(o).attr("data-id",r.newData.post_id),d(o).attr("data-template",r.newData.page_template),d(o).attr("data-title",r.newData.post_title),d(o).attr("data-slug",r.newData.post_name),d(o).attr("data-commentstatus",r.newData.comment_status),d(o).attr("data-status",r.newData._status),d(o).attr("data-sticky",r.newData.sticky),"private"===r.newData.keep_private&&d(o).attr("data-status","private"),d(o).attr("data-author",r.newData.post_author),d(o).attr("data-np-status",r.newData.np_status),d(o).attr("data-password",r.newData.post_password),d(o).attr("data-navstatus",r.newData.nav_status),d(o).attr("data-navtitle",r.newData.np_nav_title),d(o).attr("data-linktarget",r.newData.link_target),d(o).attr("data-navtitleattr",r.newData.np_title_attribute),d(o).attr("data-navcss",r.newData.np_nav_css_classes),d(o).attr("data-month",r.newData.mm),d(o).attr("data-day",r.newData.jj),d(o).attr("data-year",r.newData.aa),d(o).attr("data-hour",r.newData.hh),d(o).attr("data-minute",r.newData.mn),d(o).attr("data-datepicker",r.newData.np_date),d(o).attr("data-time",r.newData.np_time),d(o).attr("data-formattedtime",r.newData.np_time),d(o).attr("data-ampm",r.newData.np_ampm),r.newData)s.includes("np_custom")&&r.newData.hasOwnProperty(s)&&(n=s.replace("np_custom_","data-npcustom-"),d(o).attr(n,r.newData[s]));r.removeTaxonomyClasses(),r.addCategoryClasses(),r.addHierarchicalClasses(),r.addFlatClasses(),r.addStatusClass(),r.formatter.removeQuickEdit(),r.formatter.flashRow(r.row)},r.addStatusClass=function(){var e=["published","draft","pending","future"];for(i=0;i<e.length;i++)d(r.row).removeClass(e[i]);d(r.row).addClass(r.newData._status)},r.removeTaxonomyClasses=function(){taxonomies=[];var e=d(r.row).attr("class").split(/\s+/);for(i=0;i<e.length;i++)"in-"===e[i].substring(0,3)&&d(r.row).removeClass(e[i]),"inf-"===e[i].substring(0,4)&&d(r.row).removeClass(e[i])},r.addCategoryClasses=function(){if(r.newData.hasOwnProperty("post_category")){var e=r.newData.post_category;for(i=0;i<e.length;i++){var t="in-category-"+e[i];d(r.row).addClass(t)}}},r.addHierarchicalClasses=function(){var e;r.newData.hasOwnProperty("tax_input")&&(e=r.newData.tax_input,d.each(e,function(e,t){for(i=0;i<t.length;i++){var a="in-"+e+"-"+t[i];d(r.row).addClass(a)}}))},r.addFlatClasses=function(){var e;r.newData.hasOwnProperty("flat_tax")&&(e=r.newData.flat_tax,d.each(e,function(e,t){for(i=0;i<t.length;i++){var a="inf-"+e+"-nps-"+t[i];d(r.row).addClass(a)}}))},r.toggleLoading=function(e){if(e)return d(NestedPages.selectors.quickEditErrorDiv).hide(),d(r.saveButton).attr("disabled","disabled"),void d(NestedPages.selectors.quickEditLoadingIndicator).show();d(r.saveButton).attr("disabled",!1),d(NestedPages.selectors.quickEditLoadingIndicator).hide()},r.bindEvents()},(NestedPages=NestedPages||{}).QuickEditLink=function(){var a=this,s=jQuery;return a.formatter=new NestedPages.Formatter,a.button="",a.postData="",a.newPostData="",a.form="",a.bindEvents=function(){s(document).on("click",NestedPages.selectors.quickEditButtonLink,function(e){e.preventDefault(),a.formatter.removeQuickEdit(),a.button=s(this),a.openQuickEdit()}),s(document).on("click",NestedPages.selectors.quickEditLinkSaveButton,function(e){e.preventDefault(),a.submitForm()}),s(document).on("keydown",function(e){27===e.keyCode&&a.formatter.removeQuickEdit()})},a.openQuickEdit=function(){a.setData(),a.createForm(),a.populateForm()},a.setData=function(){a.postData={id:s(a.button).attr("data-id"),url:s(a.button).attr("data-url"),title:s(a.button).attr("data-title"),status:s(a.button).attr("data-status"),navstatus:s(a.button).attr("data-navstatus"),npstatus:s(a.button).attr("data-np-status"),linktarget:s(a.button).attr("data-linktarget"),parentid:s(a.button).attr("data-parentid"),navtitleattr:s(a.button).attr("data-navtitleattr"),navcss:s(a.button).attr("data-navcss"),navtype:s(a.button).attr("data-nav-type"),navobject:s(a.button).attr("data-nav-object"),navobjectid:s(a.button).attr("data-nav-object-id"),navoriginallink:s(a.button).attr("data-nav-original-link"),navoriginaltitle:s(a.button).attr("data-nav-original-title")}},a.createForm=function(){var e,t=s(a.button).closest(NestedPages.selectors.row).parent("li");a.form=s(NestedPages.selectors.quickEditLinkForm).clone(),0<s(t).children("ol").length?(e=s(t).children("ol"),s(a.form).insertBefore(e)):s(a.form).appendTo(t);s(a.form).siblings(NestedPages.selectors.row).hide()},a.populateForm=function(){var e;s(a.form).find(".np_id").val(a.postData.id),s(a.form).find(".np_title").val(a.postData.title),s(a.form).find(".np_author select").val(a.postData.author),s(a.form).find(".np_status").val(a.postData.status),s(a.form).find(".np_content").val(a.postData.url),s(a.form).find(".np_parent_id").val(a.postData.parentid),s(a.form).find(".np_title_attribute").val(a.postData.navtitleattr),s(a.form).find(".np_nav_css_classes").val(a.postData.navcss),"hide"===a.postData.npstatus?s(a.form).find(".np_status").prop("checked","checked"):s(a.form).find(".np_status").removeAttr("checked"),"hide"===a.postData.navstatus?s(a.form).find(".np_nav_status").prop("checked","checked"):s(a.form).find(".np_nav_status").removeAttr("checked"),"_blank"===a.postData.linktarget?s(a.form).find(".link_target").prop("checked","checked"):s(a.form).find(".link_target").removeAttr("checked"),"custom"!==a.postData.navobject&&""!==a.postData.navobject?(e='<div class="form-control original-link">Original: <a href="'+a.postData.navoriginallink+'" target="_blank">'+a.postData.navoriginaltitle+"</a></div>",s(a.form).find("[data-url-field]").remove(),s(e).insertAfter(s(a.form).find("h3")),s(a.form).find("[data-np-menu-object-input]").val(a.postData.navobject),s(a.form).find("[data-np-menu-objectid-input]").val(a.postData.navobjectid),s(a.form).find("[data-np-menu-type-input]").val(a.postData.navtype),s(a.form).find("h3").text("Link: "+a.postData.navoriginaltitle)):(s(a.form).find("h3").text("Link"),s(a.form).find("[data-np-menu-object-input]").val("custom"),s(a.form).find("[data-np-menu-type-input]").val("custom")),a.formatter.showQuickEdit(),s(a.form).show()},a.submitForm=function(){a.toggleLoading(!0),s.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:s(a.form).find("form").serialize()+"&action="+NestedPages.formActions.quickEditLink+"&nonce="+NestedPages.jsData.nonce+"&syncmenu="+NestedPages.jsData.syncmenu+"&post_type="+NestedPages.jsData.posttype,success:function(e){"error"===e.status?(a.toggleLoading(!1),s(a.form).find(NestedPages.selectors.quickEditErrorDiv).text(e.message).show()):(a.toggleLoading(!1),a.newPostData=e.post_data,a.updateRow())},error:function(e){a.toggleLoading(!1),s(a.form).find(NestedPages.selectors.quickEditErrorDiv).text("The form could not be saved at this time.").show()}})},a.updateRow=function(){var e=s(a.form).siblings(".row");s(e).find(".title").html(a.newPostData.post_title+' <svg class="link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path class="icon" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>');var t=s(e).find(".status");"publish"!==a.newPostData._status&&"future"!==a.newPostData._status?s(t).text("("+a.newPostData._status+")"):s(t).text("");t=s(e).find(".nav-status");"hide"==a.newPostData.nav_status?s(t).text("("+NestedPages.jsData.hiddenText+")"):s(t).text("");t=s(e).parent("li");"hide"==a.newPostData.np_status?(s(t).addClass("np-hide"),s(e).find(".status").after('<svg class="row-status-icon status-np-hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z" fill="none"/><path class="icon" d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/></svg>')):(s(t).removeClass("np-hide"),s(e).find(".status-np-hidden").remove());t=s(e).find(NestedPages.selectors.quickEditButtonLink);s(t).attr("data-id",a.newPostData.post_id),s(t).attr("data-title",a.newPostData.post_title),s(t).attr("data-url",a.newPostData.post_content),s(t).attr("data-status",a.newPostData._status),s(t).attr("data-navstatus",a.newPostData.nav_status),s(t).attr("data-np-status",a.newPostData.np_status),s(t).attr("data-linkTarget",a.newPostData.linkTarget),s(t).attr("data-navtitleattr",a.newPostData.titleAttribute),s(t).attr("data-navcss",a.newPostData.cssClasses),a.formatter.removeQuickEdit(),a.formatter.flashRow(e)},a.toggleLoading=function(e){if(s(".row").removeClass("np-updated").removeClass("np-updated-show"),e)return s(NestedPages.selectors.quickEditErrorDiv).hide(),s(NestedPages.selectors.quickEditLinkSaveButton).attr("disabled","disabled"),void s(NestedPages.selectors.quickEditLoadingIndicator).show();s(NestedPages.selectors.quickEditLinkSaveButton).attr("disabled",!1),s(NestedPages.selectors.quickEditLoadingIndicator).hide()},a.bindEvents()},(NestedPages=NestedPages||{}).Clone=function(){var t=this,a=jQuery;return t.parent_id="",t.parent_title="",t.parentLi=null,t.formatter=new NestedPages.Formatter,t.bindEvents=function(){a(document).on("click",NestedPages.selectors.cloneButton,function(e){e.preventDefault(),t.parent_id=a(this).attr("data-id"),t.parent_title=a(this).attr("data-parentname"),t.parentLi=a(this).parent(".row").parent(".page-row").parent(".npList"),t.openModal()}),a(document).on("click",NestedPages.selectors.confirmClone,function(e){e.preventDefault(),t.clone()})},t.openModal=function(){a("#"+NestedPages.selectors.cloneModal).find("[data-clone-parent]").text(t.parent_title),a(document).trigger("open-modal-manual",NestedPages.selectors.cloneModal)},t.clone=function(){t.toggleLoading(!0),a.ajax({url:NestedPages.jsData.ajaxurl,type:"post",data:{action:NestedPages.formActions.clonePost,parent_id:t.parent_id,quantity:a(NestedPages.selectors.cloneQuantity).val(),status:a(NestedPages.selectors.cloneStatus).val(),author:a(NestedPages.selectors.cloneAuthor).find("select").val(),nonce:NestedPages.jsData.nonce,posttype:NestedPages.jsData.posttype},success:function(e){t.toggleLoading(!1),a(document).trigger("close-modal-manual"),location.reload()}})},t.toggleLoading=function(e){if(e)return a("#"+NestedPages.selectors.cloneModal).find("[data-clone-loading]").show(),void a(NestedPages.selectors.confirmClone).attr("disabled","disabled");a("#"+NestedPages.selectors.cloneModal).find("[data-clone-loading]").hide(),a(NestedPages.selectors.confirmClone).attr("disabled",!1)},t.bindEvents()},(NestedPages=NestedPages||{}).Tabs=function(){var r=this,d=jQuery;return r.selectors={tabToggle:"data-np-tab-toggle",tabPane:"data-np-tab-pane",tabGroup:"data-np-tab-group"},r.bindEvents=function(){d(document).on("click","["+r.selectors.tabToggle+"]",function(e){e.preventDefault(),r.toggleTabs(d(this))})},r.toggleTabs=function(e){for(var t=d(e).attr(r.selectors.tabGroup),a=d("*["+r.selectors.tabGroup+"="+t+"]["+r.selectors.tabPane+"]"),s=d(e).attr(r.selectors.tabToggle),n=d("*["+r.selectors.tabGroup+"="+t+"]["+r.selectors.tabToggle+"]"),o=[],i=0;i<n.length;i++)o[i]=d(n[i]).parent("li")[0];d(a).hide(),d(n).removeClass("active"),d(o).removeClass("active"),d.each(a,function(){d(this).attr(r.selectors.tabPane)==s&&d(this).show()}),d.each(n,function(){d(this).attr(r.selectors.tabToggle)==s&&(d(this).addClass("active"),d(this).parent("li").addClass("active"))}),d(document).trigger("tabs-changed",[s,t,e])},r.bindEvents()},jQuery(document).ready(function(){new NestedPages.Factory}),(NestedPages=NestedPages||{}).selectors={childToggle:".child-toggle",childToggleLink:".child-toggle a",toggleAll:".nestedpages-toggleall",toggleHidden:".np-toggle-hidden",toggleStatus:".np-toggle-publish",lists:".nplist",rows:".page-row",row:".row",sortable:".sortable",notSortable:".no-sort",handle:".handle",published:".published",hiddenRows:".np-hide",errorDiv:"#np-error",loadingIndicator:"#nested-loading",syncCheckbox:".np-sync-menu",syncForm:".np-sync-menu-cont",ajaxError:"[data-nestedpages-error]",trashWithChildrenButton:"[data-nestedpages-trash-children]",toggleEditButtons:".np-toggle-edit",bulkActionsHeader:".nestedpages-list-header",bulkActionsForm:"[data-np-bulk-form]",bulkActionsCheckbox:"[data-np-bulk-checkbox]",bulkActionsIds:"[data-np-bulk-ids]",bulkActionRedirectIds:"[data-np-bulk-redirect-ids]",hiddenItemCount:"[data-np-hidden-count]",hiddenItemCountParent:"[data-np-hidden-count-parent]",bulkEditForm:"[data-np-bulk-edit-form]",bulkEditTitles:"[data-np-bulk-titles]",bulkEditRemoveItem:"[data-np-remove-bulk-item]",bulkEditCancel:"[data-np-cancel-bulk-edit]",bulkEditLinkCount:"[data-bulk-edit-link-count]",quickEditOverlay:".np-inline-overlay",quickEditLoadingIndicator:".np-qe-loading",quickEditErrorDiv:".np-quickedit-error",quickEditCancel:".np-cancel-quickedit",quickEditButtonLink:".np-quick-edit-redirect",quickEditLinkForm:".quick-edit-form-redirect",quickEditLinkSaveButton:".np-save-quickedit-redirect",quickEditOpen:".np-quick-edit",quickEditPostForm:".quick-edit-form",quickEditSaveButton:".np-save-quickedit",openLinkModal:".open-redirect-modal",linkModal:"np-link-modal",saveLink:".np-save-link",linkLoadingIndicator:".np-link-loading",linkErrorDiv:".np-new-link-error",linkForm:".np-new-link-form",linkDeleteButton:"[data-np-confirm-delete]",linkDeleteConfirmationButton:"[data-delete-confirmation]",linkDeleteConfirmationModal:"np-delete-confirmation-modal",linkDeleteConfirmationModalText:"[data-np-link-delete-text]",openPageModal:".open-bulk-modal",newPageModal:"#np-bulk-modal",newPageFormContainer:".new-child-form",newPageForm:".np-new-child-form",newPageSubmitButton:".np-save-newchild",newPageTitle:".add-new-child-row",newPageRemoveTitle:".np-remove-child",addChildButton:".add-new-child",newChildError:".np-newchild-error",cancelNewChildButton:".np-cancel-newchild",newBeforeButton:"data-insert-before",newAfterButton:"data-insert-after",cloneButton:".clone-post",confirmClone:"[data-confirm-clone]",cloneModal:"np-clone-modal",cloneQuantity:"[data-clone-quantity]",cloneStatus:"[data-clone-status]",cloneAuthor:"[data-clone-author]",tabButtonParent:"[data-np-tabs]",tabButton:"[data-np-tab]",tabContent:"[data-np-tab-pane]",thumbnailContainer:".np-thumbnail",thumbnailContainerLink:".np-thumbnail.link",manualMenuSync:"[data-np-manual-menu-sync]",manualOrderSync:"[data-np-manual-order-sync]"},NestedPages.cssClasses={noborder:"no-border"},NestedPages.jsData={ajaxurl:ajaxurl,nonce:nestedpages.np_nonce,allPostTypes:nestedpages.post_types,syncmenu:"nosync",posttype:"",nestable:!0,sortable:!0,hierarchical:!0,expandText:nestedpages.expand_text,collapseText:nestedpages.collapse_text,showHiddenText:nestedpages.show_hidden,hideHiddenText:nestedpages.hide_hidden,quickEditText:nestedpages.quick_edit,hiddenText:nestedpages.hidden,titleText:nestedpages.title},NestedPages.formActions={syncToggles:"npnestToggle",syncNesting:"npsort",syncMenu:"npsyncMenu",newPage:"npnewChild",newBeforeAfter:"npnewBeforeAfter",quickEditLink:"npquickEditLink",getTaxonomies:"npgetTaxonomies",quickEditPost:"npquickEdit",clonePost:"npclonePost",search:"npmenuSearch",newMenuItem:"npnewMenuItem",manualMenuSync:"npmanualMenuSync",postSearch:"nppostSearch",wpmlTranslations:"npWpmlTranslations",resetSettings:"npresetSettings",resetUserPrefs:"npresetUserPreferences",resetAdminMenuSettings:"npresetAdminMenuSettings",trashWithChildren:"nptrashWithChildren",toggleStatusDisplay:"nptoggleStatusDisplay"},NestedPages.Factory=function(){var t=this,e=jQuery;return t.formatter=new NestedPages.Formatter,t.dropdowns=new NestedPages.Dropdowns,t.modals=new NestedPages.Modals,t.checkAll=new NestedPages.CheckAll,t.bulkActions=new NestedPages.BulkActions,t.menuToggle=new NestedPages.MenuToggle,t.pageToggle=new NestedPages.PageToggle,t.nesting=new NestedPages.Nesting,t.syncMenuSetting=new NestedPages.SyncMenuSetting,t.newPage=new NestedPages.NewPost,t.quickEditLink=new NestedPages.QuickEditLink,t.quickEditPost=new NestedPages.QuickEditPost,t.clone=new NestedPages.Clone,t.tabs=new NestedPages.Tabs,t.menuLinks=new NestedPages.MenuLinks,t.hiddenItemCount=new NestedPages.HiddenItemCount,t.confirmDelete=new NestedPages.ConfirmDelete,t.manualSync=new NestedPages.ManualSync,t.postSearch=new NestedPages.PostSearch,t.postMove=new NestedPages.MovePost,t.wpml=new NestedPages.Wpml,t.trashWithChildren=new NestedPages.TrashWithChildren,t.init=function(){nestedpages.settings_page||(t.bindEvents(),t.setPostType(),t.setMenuSync(),t.setNestable(),t.setSortable(),t.formatter.updateSubMenuToggle(),t.formatter.setBorders(),t.formatter.setNestedMargins(),t.nesting.initializeSortable())},t.bindEvents=function(){e(document).on("click",NestedPages.selectors.quickEditOverlay,function(e){t.formatter.removeQuickEdit(),t.newPage.cancelNewPage()}),e(document).ready(function(){t.formatter.hideAjaxError(),t.formatter.sizeLinkThumbnails()})},t.setNestable=function(){var a=!1;e.each(NestedPages.jsData.allPostTypes,function(e,t){t.name===NestedPages.jsData.posttype&&(!0===t.hierarchical&&(a=!0),!0===t.disable_nesting&&(a=!1))}),NestedPages.jsData.nestable=a},t.setSortable=function(){var a=!0;e.each(NestedPages.jsData.allPostTypes,function(e,t){t.name===NestedPages.jsData.posttype&&void 0!==t.disable_sorting&&""!==t.disable_sorting&&"true"===t.disable_sorting&&(a=!1)}),NestedPages.jsData.sortable=a},t.setPostType=function(){NestedPages.jsData.posttype=nestedpages.current_post_type,void 0!==NestedPages.jsData.posttype&&""!==NestedPages.jsData.posttype||(NestedPages.jsData.posttype=e(NestedPages.selectors.sortable).attr("id").substring(3)),NestedPages.jsData.hierarchical=NestedPages.jsData.allPostTypes[NestedPages.jsData.posttype].hierarchical},t.setMenuSync=function(){NestedPages.jsData.syncmenu="1"===nestedpages.syncmenu?"sync":"nosync"},t.init()},(NestedPages=NestedPages||{}).MenuLinks=function(){var a=this,s=jQuery;return a.typeButton="",a.post="",a.formatter=new NestedPages.Formatter,a.selectors={form:"[data-np-menu-item-form]",typeSelect:"[data-np-menu-selection]",accordion:"[data-np-menu-accordion]",accordionItem:"[data-np-menu-accordion-item]",formPlaceholder:".np-menu-link-object-placeholder",formDetails:".np-menu-link-details",searchResults:"[data-np-search-result]",defaultResults:"[data-default-result]",originalLink:"[data-np-original-link]",saveButton:"[data-np-save-link]",urlInputCont:"[data-np-menu-url-cont]",errorDiv:"[data-np-error]"},a.fields={object:"[data-np-menu-object-input]",objectid:"[data-np-menu-objectid-input]",itemType:"[data-np-menu-type-input]",url:"[data-np-menu-url]",navigationLabel:"[data-np-menu-navigation-label]",titleAttribute:"[data-np-menu-title-attr]",cssClasses:"[data-np-menu-css-classes]",npStatus:"[data-np-menu-np-status]",linkTarget:"[data-np-menu-link-target]",menuTitle:"[data-np-menu-title]",parentPostType:"[data-np-menu-parent-post-type]"},a.search=new NestedPages.MenuSearch,a.bindEvents=function(){s(document).on("click",NestedPages.selectors.openLinkModal,function(e){e.preventDefault(),a.postParent=s(this).attr("data-parentid"),s(a.selectors.form).find(".parent_id").val(s(this).attr("data-parentid")),a.openModal()}),s(document).on("click",a.selectors.accordionItem,function(e){e.preventDefault(),a.accordion(s(this))}),s(document).on("click",a.selectors.typeSelect,function(e){e.preventDefault(),a.typeButton=s(this),a.setLinkType()}),s(document).on("keyup",a.fields.navigationLabel,function(){a.updateTitle()}),s(document).on("click",a.selectors.saveButton,function(e){e.preventDefault(),a.submitForm()}),s(document).on("keydown",function(e){27===e.keyCode&&s(document).trigger("close-modal-manual")})},a.openModal=function(){s(NestedPages.selectors.linkErrorDiv).hide(),s(NestedPages.selectors.linkModal).find("input").val(""),s(NestedPages.selectors.linkModal).find(".parent_id").val(a.postParent),a.clearForm(),s(a.selectors.accordion).find("ul").hide(),s(a.selectors.typeSelect).removeClass("active"),s(document).trigger("open-modal-manual",NestedPages.selectors.linkModal)},a.accordion=function(e){a.clearForm();var t=s(e).siblings("ul");if(s(t).is(":visible"))return s(e).removeClass("active"),void s(t).slideUp("fast");s(a.selectors.accordionItem).removeClass("active"),s(e).addClass("active"),s(e).parents(a.selectors.accordion).find("ul").slideUp("fast"),s(t).slideDown("fast")},a.setLinkType=function(){s(a.typeButton).hasClass("active")?a.clearForm():(s(a.typeButton).hasClass("np-custom-link")&&(s(a.selectors.accordionItem).removeClass("active"),s(a.selectors.accordion).find("ul").slideUp("fast")),s(a.selectors.formPlaceholder).hide(),a.populateForm())},a.populateForm=function(){s(a.selectors.saveButton).show(),s(a.selectors.typeSelect).removeClass("active"),s(a.typeButton).addClass("active"),s(a.fields.menuTitle).text(s(a.typeButton).text()).val(s(a.typeButton).text()),s(a.selectors.form).find("h3").find("em").text(s(a.typeButton).attr("data-np-object-name")),""!==s(a.typeButton).attr("data-np-permalink")?(s(a.selectors.form).find(a.selectors.urlInputCont).hide(),s(a.selectors.form).find(a.selectors.originalLink).html('<a href="'+s(a.typeButton).attr("data-np-permalink")+'">'+s(a.typeButton).text()+"</a>"),s(a.selectors.form).find(a.selectors.originalLink).parent(".original-link").show()):(s(a.selectors.form).find(a.selectors.urlInputCont).show(),s(a.selectors.form).find(a.selectors.originalLink).parent(".original-link").hide()),s(a.fields.object).val(s(a.typeButton).attr("data-np-menu-object")),s(a.fields.objectid).val(s(a.typeButton).attr("data-np-menu-objectid")),s(a.fields.itemType).val(s(a.typeButton).attr("data-np-menu-type")),s(a.selectors.formDetails).show()},a.clearForm=function(){s(a.selectors.form).find(a.selectors.errorDiv).hide(),s(a.selectors.saveButton).hide(),s(a.selectors.formDetails).hide(),s(a.selectors.formPlaceholder).show(),s(a.selectors.form).find("input").not(".parent_id").not(".parent-post-type").val(""),s(a.selectors.form).find(a.fields.linkTarget).val("_blank"),s(a.selectors.form).find('input[type="checkbox"]').attr("checked",!1),s(a.selectors.typeSelect).removeClass("active"),a.search.toggleLoading(!1),s(a.selectors.searchResults).remove(),s(a.selectors.defaultResults).show()},a.updateTitle=function(){var e=s(a.fields.navigationLabel).val(),t=s(a.selectors.form).find("h3").find("span");""!==e?(s(a.fields.menuTitle).val(e),s(t).text(e)):(s(a.fields.menuTitle).val(s(a.typeButton).text()),s(t).text(s(a.typeButton).text()))},a.submitForm=function(){a.toggleLoading(!0),s.ajax({url:NestedPages.jsData.ajaxurl,type:"post",data:s(a.selectors.form).serialize()+"&action="+NestedPages.formActions.newMenuItem+"&nonce="+NestedPages.jsData.nonce+"&post_type="+NestedPages.jsData.posttype+"&syncmenu="+NestedPages.jsData.syncmenu,success:function(e){a.toggleLoading(!1),"error"!==e.status?(a.post=e.post_data,a.createRow()):s(a.selectors.form).find(a.selectors.errorDiv).text(e.message).show()},error:function(e){console.log(e)}})},a.createRow=function(){var e='<li id="menuItem_'+a.post.id+'" class="page-row post-type-np-redirect published';e+='">',e+='<div class="row"><div class="child-toggle"><div class="child-toggle-spacer"></div></div><div class="row-inner">',e+='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="np-icon-sub-menu"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z" class="arrow" /></svg>',e+='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="handle np-icon-menu"><path d="M0 0h24v24H0z" fill="none" /><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" class="bars" /></svg>',e+='<a href="'+a.post.np_link_content+'" class="page-link page-title" target="_blank"><span class="title">'+a.post.menuTitle+' <svg class="link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path class="icon" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></span>',e+='</a><div class="action-buttons"><a href="#" class="np-btn np-quick-edit-redirect" ',e+='data-id="'+a.post.id+'"',e+='data-parentid="'+a.post.parent_id+'"',e+='data-title="'+a.post.menuTitle+'" ',e+='data-url="'+a.post.url+'" ',e+='data-status="publish" ',e+='data-np-status="show" ',e+='data-navstatus="show" ',e+='data-navcss="'+a.post.cssClasses+'" ',e+='data-navtitleattr="'+a.post.titleAttribute+'" ',e+='data-nav-type="'+a.post.menuType+'" ',e+='data-nav-object="'+a.post.objectType+'" ',e+='data-nav-object-id="'+a.post.objectId+'" ',e+='data-nav-original-link="'+a.post.original_link+'" ',e+='data-nav-original-title="'+a.post.original_title+'" ',e+='data-linktarget="'+a.post.link_target+'">',e+=NestedPages.jsData.quickEditText,e+="</a>",e+='<a href="'+a.post.delete_link+'" class="np-btn np-btn-trash"><i class="np-icon-remove"></i></a>',e+="</div></div></div></li>","0"===a.post.parent_id?s(".nplist:first li:first").after(e):a.appendChildRow(e),s(document).trigger("close-modal-manual"),a.row=s("#menuItem_"+a.post.id).find(".row"),a.formatter.flashRow(a.row)},a.appendChildRow=function(e){var t=s("#menuItem_"+a.post.parent_id);0===s(t).children("ol").length?(e='<ol class="sortable nplist" style="display:block;">'+e+"</ol>",s(t).append(e)):s(t).find("ol:first").prepend(e),a.formatter.updateSubMenuToggle()},a.toggleLoading=function(e){if(e)return s(a.selectors.form).find(a.selectors.errorDiv).hide(),s(a.selectors.form).find(NestedPages.selectors.quickEditLoadingIndicator).show(),void s(a.selectors.saveButton).attr("disabled","disabled");s(a.selectors.form).find(NestedPages.selectors.quickEditLoadingIndicator).hide(),s(a.selectors.saveButton).attr("disabled",!1)},a.bindEvents()},(NestedPages=NestedPages||{}).MenuSearch=function(){var s=this,n=jQuery;return s.selectors={searchForms:"*[data-np-menu-search]",defaultResults:"[data-default-result]",loadingIndicator:".np-menu-search-loading",noResults:".np-menu-search-noresults",searchType:"data-search-type",searchObject:"data-search-object",searchResults:"[data-np-search-result]"},s.activeForm="",s.results="",s.defaultResults="",s.searchType="",s.searchObject="",s.init=function(){s.bindEvents()},s.bindEvents=function(){n(document).on("keyup",s.selectors.searchForms,function(){s.activeForm=n(this),n(s.selectors.searchResults).remove(),s.performSearch()})},s.performSearch=function(){if(s.defaultResults=n(s.activeForm).parent("li").siblings(s.selectors.defaultResults),2<n(s.activeForm).val().length)return n(s.defaultResults).hide(),s.toggleLoading(!0),void s.query();s.toggleLoading(!1),n(s.defaultResults).show()},s.query=function(){s.searchType=n(s.activeForm).attr(s.selectors.searchType),s.searchObject=n(s.activeForm).attr(s.selectors.searchObject),n.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.search,nonce:NestedPages.jsData.nonce,term:n(s.activeForm).val(),searchType:s.searchType,searchObject:s.searchObject},success:function(e){console.log(e),e.results?(s.results=e.results,s.toggleLoading(!1),"post_type"===s.searchType?s.appendPosts():s.appendTaxonomies()):(s.toggleLoading(!1),n(s.activeForm).siblings(s.selectors.noResults).show())}})},s.appendPosts=function(){var a="";n.each(s.results,function(e,t){a+='<li data-np-search-result><a href="#" data-np-menu-object="'+s.searchObject+'" data-np-menu-type="post_type" data-np-menu-objectid="'+t.ID+'" data-np-permalink="'+t.permalink+'" data-np-object-name="'+t.singular_name+'" data-np-menu-selection>'+t.post_title+"</a></li>"}),n(a).insertAfter(n(s.activeForm).parent("li")),s.toggleLoading(!1)},s.appendTaxonomies=function(){var a="";n.each(s.results,function(e,t){a+='<li data-np-search-result><a href="#" data-np-menu-object="'+s.searchObject+'" data-np-menu-type="post_type" data-np-menu-objectid="'+t.term_id+'" data-np-permalink="'+t.permalink+'" data-np-object-name="'+t.taxonomy+'" data-np-menu-selection>'+t.name+"</a></li>"}),n(a).insertAfter(n(s.activeForm).parent("li")),s.toggleLoading(!1)},s.toggleLoading=function(e){var t=n(s.activeForm).siblings(s.selectors.loadingIndicator);n(s.selectors.noResults).hide(),e?n(t).show():n(t).hide()},s.init()},jQuery(document).ready(function(){new NestedPagesTrash});var NestedPagesTrash=function(){var t=this,a=jQuery;return t.trashButton=".np-empty-trash",t.confirmButton=".np-trash-confirm",t.warningModal="#np-trash-modal",t.errorAlert="#np-error",t.loadingIndicator="#nested-loading",t.trashLinks=".np-trash-links",t.postType=a("#np-trash-posttype").val(),t.nonce=nestedpages.np_nonce,t.formAction="npEmptyTrash",t.bindEvents=function(){a(document).on("click",t.confirmButton,function(e){e.preventDefault(),t.confirmEmpty()})},t.confirmEmpty=function(){t.loading(!0),a(document).trigger("close-modal-manual"),a(t.errorAlert).hide(),t.emptyTrash()},t.emptyTrash=function(){a.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:t.formAction,nonce:t.nonce,posttype:t.postType},success:function(e){t.loading(!1),"error"===e.status?a(t.errorAlert).text(e.message).show():(a(t.trashLinks).hide(),a(".notice-dismiss").click())}})},t.loading=function(e){e?a(t.loadingIndicator).show():a(t.loadingIndicator).hide()},t.bindEvents()};(NestedPages=NestedPages||{}).ConfirmDelete=function(){var t=this,a=jQuery;return t.deleteLink="",t.bindEvents=function(){a(document).on("click",NestedPages.selectors.linkDeleteButton,function(e){e.preventDefault(),t.confirmSingle(a(this))}),a(document).on("click",NestedPages.selectors.linkDeleteConfirmationButton,function(e){e.preventDefault(),a(this).hasClass("bulk")?t.deleteMultiple():t.deleteSingle()}),a(document).on("submit",NestedPages.selectors.bulkActionsForm,function(e){t.confirmMultiple(e)})},t.confirmSingle=function(e){t.deleteLink=a(e).attr("href"),a(NestedPages.selectors.linkDeleteConfirmationModalText).text(nestedpages.link_delete_confirmation_singular),a(NestedPages.selectors.linkDeleteConfirmationButton).text(nestedpages.delete).removeClass("bulk"),a(document).trigger("open-modal-manual",NestedPages.selectors.linkDeleteConfirmationModal)},t.confirmMultiple=function(e){"trash"===a('select[name="np_bulk_action"]').val()&&""!==a(NestedPages.selectors.bulkActionRedirectIds).val()&&(e.preventDefault(),a(NestedPages.selectors.linkDeleteConfirmationModalText).text(nestedpages.link_delete_confirmation),a(NestedPages.selectors.linkDeleteConfirmationButton).text(nestedpages.trash_delete_links).addClass("bulk"),a(document).trigger("open-modal-manual",[NestedPages.selectors.linkDeleteConfirmationModal]))},t.deleteMultiple=function(){a(NestedPages.selectors.bulkActionsForm)[0].submit()},t.deleteSingle=function(){window.location.replace(t.deleteLink)},t.bindEvents()},(NestedPages=NestedPages||{}).ManualSync=function(){var t=this,a=jQuery;return t.activeBtn="",t.bindEvents=function(){a(document).on("click",NestedPages.selectors.manualMenuSync,function(e){e.preventDefault(),t.activeBtn=a(this),t.syncMenu()}),a(document).on("click",NestedPages.selectors.manualOrderSync,function(e){e.preventDefault(),t.activeBtn=a(this),t.syncOrder()})},t.syncMenu=function(){t.loading(!0),a.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.manualMenuSync,nonce:NestedPages.jsData.nonce,post_type:NestedPages.jsData.posttype,syncmenu:"sync"},success:function(e){"error"===e.status?(a(NestedPages.selectors.errorDiv).text(e.message).show(),a(NestedPages.selectors.loadingIndicator).hide()):t.loading(!1)}})},t.syncOrder=function(){t.loading(!0),(new NestedPages.Nesting).syncNesting(!0,t.loading(!1))},t.loading=function(e){if(e)return a(t.activeBtn).addClass("disabled"),void a(NestedPages.selectors.loadingIndicator).show();a(t.activeBtn).removeClass("disabled"),a(NestedPages.selectors.loadingIndicator).hide()},t.bindEvents()},(NestedPages=NestedPages||{}).PostSearch=function(){var s=this,n=jQuery;return s.selectors={input:"data-nestedpages-post-search",form:"data-nestedpages-post-search-form",loadingIndicator:"data-nestedpages-loading",noResults:"data-nestedpages-no-results",results:"data-nestedpages-search-results"},s.changed=!1,s.activeInput="",s.results="",s.defaultResults="",s.postType="",s.activeForm="",s.bindEvents=function(){n("["+s.selectors.input+"]").on("input",function(){return s.activeInput=n(this),s.setOptions(),s.changed||s.setDefaultResults(),""===n(this).val()?(n(s.activeForm).find("["+s.selectors.noResults+"]").hide(),void s.showDefaultResults()):void s.query()})},s.setDefaultResults=function(){s.defaultResults=n(s.activeForm).find("["+s.selectors.results+"]").html(),s.changed=!0},s.showDefaultResults=function(){n(s.activeForm).find("["+s.selectors.results+"]").html(s.defaultResults)},s.setOptions=function(){s.postType=n(s.activeInput).attr(s.selectors.input),s.activeForm=n(s.activeInput).parents("["+s.selectors.form+"]")},s.performSearch=function(){if(s.defaultResults=n(s.activeForm).parent("li").siblings(s.selectors.defaultResults),2<n(s.activeForm).val().length)return n(s.defaultResults).hide(),s.toggleLoading(!0),void s.query();s.toggleLoading(!1),n(s.defaultResults).show()},s.query=function(){n(s.activeForm).find("["+s.selectors.results+"]").empty(),s.toggleLoading(!0),n.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.postSearch,nonce:NestedPages.jsData.nonce,term:n(s.activeInput).val(),postType:s.postType},success:function(e){e.results?(s.results=e.results,s.loadResults(),s.toggleLoading(!1)):(s.toggleLoading(!1),n(s.activeForm).find("["+s.selectors.noResults+"]").show())}})},s.loadResults=function(){var a="<ul>";n.each(s.results,function(e,t){a+='<li><a href="#" data-assignment-page-id="'+t.ID+'" data-assignment-page-title="'+t.post_title+'">'+t.post_title+"</a></li>"}),a+="</ul>",n(s.activeForm).find("["+s.selectors.results+"]").html(a),s.toggleLoading(!1)},s.toggleLoading=function(e){var t=n(s.activeForm).find("["+s.selectors.loadingIndicator+"]"),a=n(s.activeForm).find("["+s.selectors.noResults+"]");n(a).hide(),e?n(t).show():n(t).hide()},s.bindEvents()},(NestedPages=NestedPages||{}).MovePost=function(){var t=this,a=jQuery;return t.formatter=new NestedPages.Formatter,t.nesting=new NestedPages.Nesting,t.activeRow,t.selectors={moveToTop:"data-push-to-top",moveToBottom:"data-push-to-bottom"},t.bindEvents=function(){a(document).ready(function(){t.disableTopOnFirst(),t.disableBottomOnLast()}),a(document).on("click","["+t.selectors.moveToTop+"]",function(e){e.preventDefault(),a(this).hasClass("disabled")||(t.activeRow=a(this).closest(NestedPages.selectors.rows),t.moveToTop())}),a(document).on("click","["+t.selectors.moveToBottom+"]",function(e){e.preventDefault(),a(this).hasClass("disabled")||(t.activeRow=a(this).closest(NestedPages.selectors.rows),t.moveToBottom())})},t.moveToTop=function(){var e=a(t.activeRow).parent(NestedPages.selectors.lists),e=a(e).find(NestedPages.selectors.rows).first();a(t.activeRow).insertBefore(e),t.formatter.setBorders(),a(document).click(),t.nesting.syncNesting(),t.disableTopOnFirst(),t.disableBottomOnLast()},t.moveToBottom=function(){var e=a(t.activeRow).parent(NestedPages.selectors.lists),e=a(e).children(NestedPages.selectors.rows).last();a(t.activeRow).insertAfter(e),t.formatter.setBorders(),a(document).click(),t.nesting.syncNesting(),t.disableTopOnFirst(),t.disableBottomOnLast()},t.disableTopOnFirst=function(){var e=a(NestedPages.selectors.lists);a.each(e,function(){a(this).find("["+t.selectors.moveToTop+"]").removeClass("disabled");var e=a(this).find(NestedPages.selectors.rows).first();a(e).find("["+t.selectors.moveToTop+"]").addClass("disabled")})},t.disableBottomOnLast=function(){var e=a(NestedPages.selectors.lists);a.each(e,function(){a(this).find("["+t.selectors.moveToBottom+"]").removeClass("disabled");var e=a(this).find(NestedPages.selectors.rows).last();a(e).find("["+t.selectors.moveToBottom+"]").addClass("disabled")})},t.bindEvents()},(NestedPages=NestedPages||{}).TrashWithChildren=function(){var t=this,a=jQuery;return t.post_id="",t.bindEvents=function(){a(document).on("click",NestedPages.selectors.trashWithChildrenButton,function(e){e.preventDefault(),t.post_id=a(this).attr("data-post-id"),t.trash()})},t.trash=function(){a.ajax({url:NestedPages.jsData.ajaxurl,type:"post",data:{action:NestedPages.formActions.trashWithChildren,nonce:NestedPages.jsData.nonce,post_id:t.post_id,screen:nestedpages.current_page},success:function(e){window.location.replace(e.redirect)},error:function(e){console.log(e)}})},t.bindEvents()},(NestedPages=NestedPages||{}).Wpml=function(){var t=this,n=jQuery;return t.button=null,t.postData=null,t.modal=null,t.parent_li=null,t.formatter=new NestedPages.Formatter,t.selectors={translationsBtn:"data-nestedpages-translations",modal:"data-np-wpml-translations-modal",title:"data-wmpl-translation-title",table:"data-np-wpml-translations-modal-table"},t.bindEvents=function(){nestedpages.wpml&&n(document).on("click","["+t.selectors.translationsBtn+"]",function(e){e.preventDefault(),t.createTranslationsModal(n(this))})},t.createTranslationsModal=function(e){t.parent_li=n(e).parents(".action-buttons").closest(NestedPages.selectors.row).parent("li"),t.button=n(t.parent_li).find(NestedPages.selectors.quickEditOpen),t.postData={id:n(t.button).attr("data-id"),title:n(t.button).attr("data-title"),slug:n(t.button).attr("data-slug")},t.modal=n("["+t.selectors.modal+"]").clone(),0<n(t.parent_li).children("ol").length?(e=n(t.parent_li).children("ol"),n(t.modal).insertBefore(e)):n(t.modal).appendTo(t.parent_li),n(t.modal).find("["+t.selectors.title+"]").text(t.postData.title),t.formatter.showQuickEdit(),n(t.modal).show(),t.getTranslationData()},t.getTranslationData=function(){n.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.wpmlTranslations,post_id:t.postData.id,nonce:NestedPages.jsData.nonce},success:function(e){console.log(e),console.log(t.postData.id),"success"===e.status?t.populateModal(e.translations):(n(t.modal).find(NestedPages.selectors.quickEditErrorDiv).text(e.message).show(),t.toggleLoading(!1))}})},t.populateModal=function(a){var s="<tbody>";n.each(a,function(e,t){e=a[e];s+="<tr>",s+='<td><img src="'+e.country_flag_url+'" alt="'+e.translated_name+'" /> '+e.translated_name+"</td>",s+="<td>",e.has_translation&&e.edit_link?s+='<a href="'+e.edit_link+'">'+e.translation.post_title+" ("+nestedpages.edit+")</a>":s+='<a href="'+e.add_link+'" class="np-btn">+ '+nestedpages.add_translation+"</a>",s+="</td>",s+="</tr>"}),s+="</tbody>",n(t.modal).find("["+t.selectors.table+"]").html(s),t.toggleLoading(!1)},t.toggleLoading=function(e){e?n(t.modal).addClass("loading"):n(t.modal).removeClass("loading")},t.bindEvents()};